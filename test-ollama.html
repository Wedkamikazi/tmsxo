<!DOCTYPE html>
<html>
<head>
    <title>Ollama Integration Test</title>
</head>
<body>
    <h1>ü§ñ Ollama Integration Test</h1>
    <div id="status">Testing Ollama connection...</div>
    <div id="result"></div>
    
    <script>
        async function testOllama() {
            const statusDiv = document.getElementById('status');
            const resultDiv = document.getElementById('result');
            
            try {
                // Test Ollama connection
                const response = await fetch('http://localhost:11434/api/tags');
                const data = await response.json();
                
                statusDiv.innerHTML = `
                    <h2>‚úÖ Ollama Status: CONNECTED</h2>
                    <p>üìã Available Models: ${data.models.length}</p>
                    <p>ü§ñ Primary Model: ${data.models[0].name}</p>
                    <p>üíæ Model Size: ${Math.round(data.models[0].size / 1024 / 1024 / 1024)}GB</p>
                `;
                
                // Test transaction analysis
                const testTransaction = {
                    model: data.models[0].name,
                    prompt: `Analyze this financial transaction and respond in JSON format:
                    
Transaction: "AMAZON.COM PURCHASE $67.43"
Amount: $67.43
Date: 2024-12-14

Respond with:
{
  "category": "category name",
  "confidence": 0.95,
  "reasoning": "brief explanation",
  "sentiment": "positive/neutral/negative"
}`,
                    stream: false
                };
                
                const analysisResponse = await fetch('http://localhost:11434/api/generate', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(testTransaction)
                });
                
                const analysisData = await analysisResponse.json();
                
                resultDiv.innerHTML = `
                    <h3>üß† Transaction Analysis Test:</h3>
                    <pre>${analysisData.response}</pre>
                `;
                
            } catch (error) {
                statusDiv.innerHTML = `<h2>‚ùå Ollama Status: DISCONNECTED</h2><p>Error: ${error.message}</p>`;
            }
        }
        
        testOllama();
    </script>
</body>
</html> 